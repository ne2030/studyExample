<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>appendChild duplication</title>
    </head>
    <body id="root">
        <div class="first">
            <div class="second">
                <div class="c">

                </div>
            </div>
        </div>
    </body>
    <script type="text/javascript">
        var container = document.querySelector('#root .first .second');
        var a = document.createElement('div');
        var b = document.createElement('div');
        a.classList.add('a');
        b.classList.add('b');

        a.innerText = 'appendChild El';
        b.innerText = 'key compare';

        // appendChild

        console.log('appendChild:: ', new Date());

        for(let i = 0; i < 10000000; i++) {
            container.appendChild(a);
        }

        console.log(new Date());

        // children key check
        for(let i = 0; i < 10000000; i++) {
            let list = [].slice.call(container.children).filter(child => {
                return child.classList.contains('b');
            });
            !list.length && container.appendChild(b);
        }

        console.log(new Date());

        // 결과
        // el 가 일정하다면 (react 의 경우, 상태를 mutate 하지 않고 immutable 해서 그런건가..?!)
        // appendChild 가 더 빠른 것 같음 (중복을 막는데도 좋은 듯);
        //
    </script>
</html>
